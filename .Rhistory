mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -race_native_category, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = race_native_category, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_15 = "Less than 15",
mean_age_at_immigration_15to24 = "15 - 23",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
)) %>%
select(-variable) %>%
rename(`Black` = `10`,
`White` = `11`,
`Other` = `12`)
print(table1_male_native_race)
table1_male <- bind_cols(
table1_male,
table1_male_migrant,
table1_male_native_race
)
rm(table1_male_migrant, table1_male_native_race)
table1_male <- table1_male %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
select(variable, mexico, `puerto rico`, `dominican republic`, cuba,`foreign-born Central-American Latino`, `foreign-born Other Latino`,`foreign-born Not Latino`, `native-born Other Latino`, `Black`, `White`, `Other`) %>%
rename(
`Dominican Republic` = `dominican republic`,
Mexico = mexico,
`Puerto Rico` = `puerto rico`,
Demographics = variable,
Cuba = cuba,
`Central America` = `foreign-born Central-American Latino`,
`Latin America` = `foreign-born Other Latino`,
`Other Countries` = `foreign-born Not Latino`,
`Hispanic` = `native-born Other Latino`
) %>%
add_row(Demographics = "Age", .before = 1) %>%
add_row(Demographics = "Education Completed", .before = 6) %>%
add_row(Demographics = "Household", .before = 11) %>%
add_row(Demographics = "Age Migrated", .before = 16) %>%
add_row(Demographics = "Migration Cohort", .before = 21) %>%
add_row(Demographics = "Acculturation", .before = 26)
print(table1_male)
table1_male_code <- xtable(table1_male,
caption = "Sociodemographic Comparison of Hispanics in the U.S. by Birth Country (2016-20 ACS): Males",
align = "ll|ccccccccccc")
latex_code <- capture.output(print(table1_male_code,
type = "latex",
caption.placement = "top",
size = "\\small",
include.rownames = FALSE))
#to replace align tabular code
tabular_line_index <- grep("\\\\begin\\{tabular\\}", latex_code)
latex_code[tabular_line_index] <- "\\begin{tabular}{>{\\raggedright\\arraybackslash}p{3.2cm}|lcccccc|cccc}"
# To align rows right
adjustments <- list(
list(rows = c("60 - 69", "70 - 79", "80 - 89", "90 plus"), width = 1.5),
list(rows = c("Less than Primary"), width = 3.2),
list(rows = c("Primary"), width = 1.7),
list(rows = c("Secondary", "University"), width = 2),
list(rows = c("Less than 15"), width = 2.4),
list(rows = c("50 and Above"), width = 2.6),
list(rows = c("15 - 23", "24 - 49", "Citizen"), width = 1.6),
list(rows = c("Lives with Child"), width = 2.9),
list(rows = c("Before 1965"), width = 2.3),
list(rows = c("1965 - 1979", "1980 - 1999", "Lives Alone"), width = 2.2),
list(rows = c("After 1999"), width = 2.1),
list(rows = c("Household Size"), width = 2.7),
list(rows = c("English Speakers"), width = 3.0),
list(rows = c("Married/Cohabiting"), width = 3.4)
)
adjust_latex_rows <- function(latex_code, adjustments) {
for (adjustment in adjustments) {
for (row in adjustment$rows) {
row_index <- grep(paste0("^\\s*", row), latex_code)
if (length(row_index) > 0) {
latex_code[row_index] <- gsub(
"^(\\s*)(.*?)(&.*)",
sprintf("\\1\\\\multicolumn{1}{>{\\\\raggedleft\\\\arraybackslash}p{%scm}|}{\\\\makebox[%scm][r]{\\2}}\\3",
adjustment$width, adjustment$width),
latex_code[row_index]
)
}
}
}
return(latex_code)
}
latex_code <- adjust_latex_rows(latex_code, adjustments)
writeLines(latex_code, "/Users/chrissoria/Documents/Research/us_international_ses/tables/r_tables/table1_male.tex")
rm(table1_male, table1_male_code, adjustments, latex_code, adjust_latex_rows)
table1_25_plus <- us_df_2020 %>%
filter(country_string == "mexico" |
country_string == "puerto rico" |
country_string == "dominican republic" |
country_string == "cuba",
mean_age_at_immigration_15 == 0,
mean_age_at_immigration_15to24 == 0) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_15 = "Less than 15",
mean_age_at_immigration_15to24 = "15 - 23",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
))
table1_25_plus <- us_df_2020 %>%
filter(country_string == "mexico" |
country_string == "puerto rico" |
country_string == "dominican republic" |
country_string == "cuba",
mean_age_at_immigration_15 == 0,
mean_age_at_immigration_15to24 == 0) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
))
table1_25_plus <- us_df_2020 %>%
filter(country_string == "mexico" |
country_string == "puerto rico" |
country_string == "dominican republic" |
country_string == "cuba",
age_at_immigration_15 == 0,
age_at_immigration_15to24 == 0) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
))
table1_25_plus <- us_df_2020 %>%
filter(country_string == "mexico" |
country_string == "puerto rico" |
country_string == "dominican republic" |
country_string == "cuba",
age_at_immigration_under15 == 0,
age_at_immigration_15to24 == 0) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
))
print(table1_25_plus)
table1_25_plus_migrant <- us_df_2020 %>%
filter(!country_string %in% c("mexico", "puerto rico", "dominican republic", "cuba")) %>%
filter(!hispanic_category_migrant_status %in% c("native-born Not Latino"),
mean_age_at_immigration_15 == 0,
mean_age_at_immigration_15to24 == 0) %>%
group_by(hispanic_category_migrant_status) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -hispanic_category_migrant_status, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = hispanic_category_migrant_status, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
)) %>%
select(-variable)
table1_25_plus <- us_df_2020 %>%
filter(country_string == "mexico" |
country_string == "puerto rico" |
country_string == "dominican republic" |
country_string == "cuba",
age_at_immigration_under15 == 0,
age_at_immigration_15to24 == 0) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
))
print(table1_25_plus)
table1_25_plus_migrant <- us_df_2020 %>%
filter(!country_string %in% c("mexico", "puerto rico", "dominican republic", "cuba")) %>%
filter(!hispanic_category_migrant_status %in% c("native-born Not Latino"),
age_at_immigration_under15 == 0,
age_at_immigration_15to24 == 0) %>%
group_by(hispanic_category_migrant_status) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
mean_age_at_immigration_25to49 = weighted.mean(age_at_immigration_25to49, perwt, na.rm = TRUE),
mean_age_at_immigration_50plus = weighted.mean(age_at_immigration_50plus, perwt, na.rm = TRUE),
mean_yrimm_before1965 = weighted.mean(yrimm_before1965, perwt, na.rm = TRUE),
mean_yrimm_1965_1979 = weighted.mean(yrimm_1965to1980, perwt, na.rm = TRUE),
mean_yrimm_1980_1999 = weighted.mean(yrimm_1980to1999, perwt, na.rm = TRUE),
mean_yrimm_2000plus = weighted.mean(yrimm_2000plus, perwt, na.rm = TRUE),
mean_is_citizen = weighted.mean(is_naturalized_citizen, perwt, na.rm = TRUE),
mean_english_speaker = weighted.mean(english_speaker, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -hispanic_category_migrant_status, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = hispanic_category_migrant_status, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_english_speaker = "English Speakers",
mean_is_citizen = "Citizen",
mean_age_at_immigration_25to49 = "24 - 49",
mean_age_at_immigration_50plus = "50 and Above",
mean_years_in_us = "Years in US",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University",
mean_yrimm_before1965 = "Before 1965",
mean_yrimm_1965_1979 = "1965 - 1979",
mean_yrimm_1980_1999 = "1980 - 1999",
mean_yrimm_2000plus = "After 1999"
)) %>%
select(-variable)
print(table1_25_plus_migrant)
