mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1 <- create_table_for_sex_international(1)
table1_sex_2 <- create_table_for_sex_international(2)
combined_table1 <- bind_rows(
table1_sex_2, #females first
table1_sex_1 #males second
)
combined_table1 <- combined_table1 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
rename(Demographics = variable)
#adding in the US born counterparts
create_table_for_sex_us_counterparts <- function(sex_value) {
us_df_2010 %>%
filter(sex == sex_value) %>%
filter(country_string %in% c("mexico", "dominican republic", "cuba", "puerto rico")) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1_us <- create_table_for_sex_us_counterparts(1)
table1_sex_2_us <- create_table_for_sex_us_counterparts(2)
combined_table2 <- bind_rows(
table1_sex_2_us, #females first
table1_sex_1_us #males second
)
combined_table2 <- combined_table2 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
select(-variable)
table1 <- cbind(combined_table1, combined_table2) %>%
rename(`US Mexican-born` = mexico,
`US Puerto-Rican-born` = `puerto rico`,
`US Dominican-born` = `dominican republic`,
`US Cuban-born` = cuba,
`Cubans`  = Cuba_2012,
`Dominicans`  = DR_2010,
`Dominicans`  = DR_2010,
`Mexicans`  = Mexico_2010,
`Puerto Ricans`  = PR_2010,
`All US Residents` = US_2010
) %>%
select(
Demographics,
`Mexicans`, `US Mexican-born`,
`Puerto Ricans`, `US Puerto-Rican-born`,
`Dominicans`, `US Dominican-born`,
`Cubans`, `US Cuban-born`
) %>%
add_row(Demographics = "Age", .before = 1) %>%
add_row(Demographics = "Education Completed", .before = 6) %>%
add_row(Demographics = "Household", .before = 11) %>%
add_row(Demographics = "Age", .before = 17) %>%
add_row(Demographics = "Education Completed", .before = 21) %>%
add_row(Demographics = "Household", .before = 26) %>%
mutate(Gender = ifelse(row_number() == 1, "Female",
ifelse(row_number() == 17, "Male", ""))) %>%
select(Gender, everything())
print(table1)
table1_code <- xtable(table1,
caption = "Sociodemographics of Hispanics in the U.S. by Birth Country (2020 Census)",
align = "lll|cccccccc")
latex_code <- capture.output(print(table1_code,
type = "latex",
caption.placement = "top",
size = "\\small",
include.rownames = FALSE))
tabular_line_index <- grep("\\\\begin\\{tabular\\}", latex_code)
latex_code[tabular_line_index] <- "\\begin{tabular}{>{\\raggedright\\arraybackslash}p{3.2cm}l|cccccccc}"
adjustments <- list(
list(rows = c("60 - 69", "70 - 79", "80 - 89"), width = 1.5),
list(rows = c("Less than Primary"), width = 3.2),
list(rows = c("Primary"), width = 1.7),
list(rows = c("Secondary", "University"), width = 2),
list(rows = c("Less than 15"), width = 2.4),
list(rows = c("15 - 49"), width = 1.6),
list(rows = c("Greater than 50", "Lives with Child"), width = 2.9),
list(rows = c("Before 1965"), width = 2.3),
list(rows = c("1965 - 1979", "1980 - 1999", "Lives Alone"), width = 2.2),
list(rows = c("After 2000"), width = 2.1),
list(rows = c("Household Size"), width = 2.7)
)
# Function to adjust LaTeX rows based on the adjustments list
adjust_latex_rows <- function(latex_code, adjustments) {
for (adjustment in adjustments) {
width <- adjustment$width
for (row in adjustment$rows) {
pattern <- paste0("& \\\\multicolumn\\{1\\}\\{>\\{\\\\raggedleft\\\\arraybackslash\\}p\\{.*cm\\}\\|\\}\\{\\\\makebox\\[.*cm\\]\\[r\\]\\{\\}\\}& ", row)
replacement <- paste0("& \\\\multicolumn{1}{>{\\\\raggedleft\\\\arraybackslash}p{", width, "cm}|}{\\\\makebox[", width, "cm][r]{", row, "}}")
latex_code <- str_replace_all(latex_code, pattern, replacement)
}
}
return(latex_code)
}
latex_code <- adjust_latex_rows(latex_code, adjustments)
print(latex_code)
writeLines(latex_code, "/Users/chrissoria/Documents/Research/us_international_ses/tables/r_tables/table1.tex")
create_table_for_sex_international <- function(sex_value) {
in_df %>%
filter(sex == sex_value) %>%
filter(!is.na(country_year_bpl)) %>%
group_by(country_year) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_year, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_year, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1 <- create_table_for_sex_international(1)
table1_sex_2 <- create_table_for_sex_international(2)
combined_table1 <- bind_rows(
table1_sex_2, #females first
table1_sex_1 #males second
)
combined_table1 <- combined_table1 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
rename(Demographics = variable)
#adding in the US born counterparts
create_table_for_sex_us_counterparts <- function(sex_value) {
us_df_2010 %>%
filter(sex == sex_value) %>%
filter(country_string %in% c("mexico", "dominican republic", "cuba", "puerto rico")) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1_us <- create_table_for_sex_us_counterparts(1)
table1_sex_2_us <- create_table_for_sex_us_counterparts(2)
combined_table2 <- bind_rows(
table1_sex_2_us, #females first
table1_sex_1_us #males second
)
combined_table2 <- combined_table2 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
select(-variable)
table1 <- cbind(combined_table1, combined_table2) %>%
rename(`US Mexican-born` = mexico,
`US Puerto-Rican-born` = `puerto rico`,
`US Dominican-born` = `dominican republic`,
`US Cuban-born` = cuba,
`Cubans`  = Cuba_2012,
`Dominicans`  = DR_2010,
`Dominicans`  = DR_2010,
`Mexicans`  = Mexico_2010,
`Puerto Ricans`  = PR_2010,
`All US Residents` = US_2010
) %>%
select(
Demographics,
`Mexicans`, `US Mexican-born`,
`Puerto Ricans`, `US Puerto-Rican-born`,
`Dominicans`, `US Dominican-born`,
`Cubans`, `US Cuban-born`
) %>%
add_row(Demographics = "Age", .before = 1) %>%
add_row(Demographics = "Education Completed", .before = 6) %>%
add_row(Demographics = "Household", .before = 11) %>%
add_row(Demographics = "Age", .before = 17) %>%
add_row(Demographics = "Education Completed", .before = 21) %>%
add_row(Demographics = "Household", .before = 26) %>%
mutate(Gender = ifelse(row_number() == 1, "Female",
ifelse(row_number() == 17, "Male", ""))) %>%
select(Gender, everything())
print(table1)
table1_code <- xtable(table1,
caption = "Sociodemographics of Hispanics in the U.S. by Birth Country (2020 Census)",
align = "lll|cccccccc")
latex_code <- capture.output(print(table1_code,
type = "latex",
caption.placement = "top",
size = "\\small",
include.rownames = FALSE))
tabular_line_index <- grep("\\\\begin\\{tabular\\}", latex_code)
latex_code[tabular_line_index] <- "\\begin{tabular}{>{\\raggedright\\arraybackslash}p{3.2cm}l|cccccccc}"
adjustments <- list(
list(rows = c("60 - 69", "70 - 79", "80 - 89"), width = 1.5),
list(rows = c("Less than Primary"), width = 3.2),
list(rows = c("Primary"), width = 1.7),
list(rows = c("Secondary", "University"), width = 2),
list(rows = c("Less than 15"), width = 2.4),
list(rows = c("15 - 49"), width = 1.6),
list(rows = c("Greater than 50", "Lives with Child"), width = 2.9),
list(rows = c("Before 1965"), width = 2.3),
list(rows = c("1965 - 1979", "1980 - 1999", "Lives Alone"), width = 2.2),
list(rows = c("After 2000"), width = 2.1),
list(rows = c("Household Size"), width = 2.7)
)
# Function to adjust LaTeX rows based on the adjustments list
adjust_latex_rows <- function(latex_code, adjustments) {
for (adjustment in adjustments) {
width <- adjustment$width
for (row in adjustment$rows) {
pattern <- paste0("& \\\\multicolumn\\{1\\}\\{>\\{\\\\raggedleft\\\\arraybackslash\\}p\\{.*cm\\}\\|\\}\\{\\\\makebox\\[.*cm\\]\\[r\\]\\{\\}\\}& ", row)
replacement <- paste0("& \\\\multicolumn{1}{>{\\\\raggedleft\\\\arraybackslash}p{", width, "cm}|}{\\\\makebox[", width, "cm][r]{", row, "}}")
latex_code <- str_replace_all(latex_code, pattern, replacement)
}
}
return(latex_code)
}
latex_code <- adjust_latex_rows(latex_code, adjustments)
print(latex_code)
writeLines(latex_code, "/Users/chrissoria/Documents/Research/us_international_ses/tables/r_tables/table1.tex")
create_table_for_sex_international <- function(sex_value) {
in_df %>%
filter(sex == sex_value) %>%
filter(!is.na(country_string)) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_year, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_year, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1 <- create_table_for_sex_international(1)
create_table_for_sex_international <- function(sex_value) {
in_df %>%
filter(sex == sex_value) %>%
filter(!is.na(country_string)) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1 <- create_table_for_sex_international(1)
table1_sex_2 <- create_table_for_sex_international(2)
combined_table1 <- bind_rows(
table1_sex_2, #females first
table1_sex_1 #males second
)
combined_table1
create_table_for_sex_international <- function(sex_value) {
in_df %>%
filter(sex == sex_value) %>%
filter(!is.na(country_string)) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1 <- create_table_for_sex_international(1)
table1_sex_2 <- create_table_for_sex_international(2)
combined_table1 <- bind_rows(
table1_sex_2, #females first
table1_sex_1 #males second
)
combined_table1 <- combined_table1 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
rename(Demographics = variable)
#adding in the US born counterparts
create_table_for_sex_us_counterparts <- function(sex_value) {
us_df_2010 %>%
filter(sex == sex_value) %>%
filter(country_string %in% c("mexico", "dominican republic", "cuba", "puerto rico")) %>%
group_by(country_string) %>%
summarise(
mean_age_60_69 = weighted.mean(age_60to69, perwt, na.rm = TRUE),
mean_age_70_79 = weighted.mean(age_70to79, perwt, na.rm = TRUE),
mean_age_80_89 = weighted.mean(age_80to89, perwt, na.rm = TRUE),
mean_age_90plus = weighted.mean(age_90plus, perwt, na.rm = TRUE),
mean_less_than_primary_completed = weighted.mean(less_than_primary_completed, perwt, na.rm = TRUE),
mean_primary_completed = weighted.mean(primary_completed, perwt, na.rm = TRUE),
mean_secondary_completed = weighted.mean(secondary_completed, perwt, na.rm = TRUE),
mean_university_completed = weighted.mean(university_completed, perwt, na.rm = TRUE),
mean_hhsize = weighted.mean(famsize, perwt, na.rm = TRUE),
mean_lives_alone = weighted.mean(lives_alone, perwt, na.rm = TRUE),
mean_has_child_in_hh = weighted.mean(child_in_household, perwt, na.rm = TRUE),
mean_married_cohab = weighted.mean(married_cohab, perwt, na.rm = TRUE),
N = n()
) %>%
pivot_longer(cols = -country_string, names_to = "variable", values_to = "value") %>%
pivot_wider(names_from = country_string, values_from = value) %>%
mutate(variable = recode(variable,
mean_age_60_69 = "60 - 69",
mean_age_70_79 = "70 - 79",
mean_age_80_89 = "80 - 89",
mean_age_90plus = "90 plus",
mean_married_cohab = "Married/Cohabiting",
mean_hhsize = "Household Size",
mean_lives_alone = "Lives Alone",
mean_has_child_in_hh = "Lives with Child",
mean_less_than_primary_completed = "Less than Primary",
mean_primary_completed = "Primary",
mean_secondary_completed = "Secondary",
mean_university_completed = "University"
))
}
table1_sex_1_us <- create_table_for_sex_us_counterparts(1)
table1_sex_2_us <- create_table_for_sex_us_counterparts(2)
combined_table2 <- bind_rows(
table1_sex_2_us, #females first
table1_sex_1_us #males second
)
combined_table2 <- combined_table2 %>%
mutate(across(where(is.numeric), round, digits = 2)) %>%
mutate(across(everything(), ~ as.character(.))) %>%
mutate(across(everything(), ~ ifelse(. == "NaN", "-", .))) %>%
mutate(across(everything(), ~ ifelse(. == "0", "-", .))) %>%
select(-variable)
table1 <- cbind(combined_table1, combined_table2) %>%
rename(`US Mexican-born` = mexico,
`US Puerto-Rican-born` = `puerto rico`,
`US Dominican-born` = `dominican republic`,
`US Cuban-born` = cuba,
`Cubans`  = Cuba,
`Dominicans`  = DR,
`Mexicans`  = Mexico,
`Puerto Ricans`  = PR,
`All US Residents` = US
) %>%
select(
Demographics,
`Mexicans`, `US Mexican-born`,
`Puerto Ricans`, `US Puerto-Rican-born`,
`Dominicans`, `US Dominican-born`,
`Cubans`, `US Cuban-born`
) %>%
add_row(Demographics = "Age", .before = 1) %>%
add_row(Demographics = "Education Completed", .before = 6) %>%
add_row(Demographics = "Household", .before = 11) %>%
add_row(Demographics = "Age", .before = 17) %>%
add_row(Demographics = "Education Completed", .before = 21) %>%
add_row(Demographics = "Household", .before = 26) %>%
mutate(Gender = ifelse(row_number() == 1, "Female",
ifelse(row_number() == 17, "Male", ""))) %>%
select(Gender, everything())
print(table1)
